<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="r2" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="6088f762-9215-45f1-bc0b-35f5d91a37bd">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="grupo" class="java.lang.String">
		<defaultValueExpression><![CDATA[ERRO]]></defaultValueExpression>
	</parameter>
	<parameter name="colaborador" class="java.lang.String">
		<defaultValueExpression><![CDATA[22]]></defaultValueExpression>
	</parameter>
	<parameter name="data_inicial" class="java.lang.String">
		<defaultValueExpression><![CDATA[01/01/2016]]></defaultValueExpression>
	</parameter>
	<parameter name="data_final" class="java.lang.String">
		<defaultValueExpression><![CDATA[27/06/2017]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select a.pergunta as Pergunta,
(select count(resposta) from pesquisa where grupo= $P{grupo} and pergunta=a.id and colaborador= $P{colaborador} and resposta=1 and data between str_to_date($P{data_inicial}, "%d/%m/%Y") and str_to_date($P{data_final}, "%d/%m/%Y")) as '1 - Excelente',
(select count(resposta) from pesquisa where grupo= $P{grupo} and pergunta=a.id and colaborador= $P{colaborador} and resposta=2 and data between str_to_date($P{data_inicial}, "%d/%m/%Y") and str_to_date($P{data_final}, "%d/%m/%Y")) as '2 - Muito Bom',
(select count(resposta) from pesquisa where grupo= $P{grupo} and pergunta=a.id and colaborador= $P{colaborador} and resposta=3 and data between str_to_date($P{data_inicial}, "%d/%m/%Y") and str_to_date($P{data_final}, "%d/%m/%Y")) as '3 - Bom',
(select count(resposta) from pesquisa where grupo= $P{grupo} and pergunta=a.id and colaborador= $P{colaborador} and resposta=4 and data between str_to_date($P{data_inicial}, "%d/%m/%Y") and str_to_date($P{data_final}, "%d/%m/%Y")) as '4 - Regular',
(select count(resposta) from pesquisa where grupo= $P{grupo} and pergunta=a.id and colaborador= $P{colaborador} and resposta=5 and data between str_to_date($P{data_inicial}, "%d/%m/%Y") and str_to_date($P{data_final}, "%d/%m/%Y")) as '5 - Ruim',
(select count(resposta) from pesquisa where grupo= $P{grupo} and pergunta=a.id and colaborador= $P{colaborador} and data between str_to_date($P{data_inicial}, "%d/%m/%Y") and str_to_date($P{data_final}, "%d/%m/%Y") and (resposta=1 or resposta=2 or resposta=3 or resposta=4 or resposta=5)) as 'TOTAL'
from pesquisa as p inner join perguntas as a where grupo= $P{grupo} and colaborador= $P{colaborador} and data between str_to_date($P{data_inicial}, "%d/%m/%Y") and str_to_date($P{data_final}, "%d/%m/%Y")
group by a.pergunta, a.id]]>
	</queryString>
	<field name="Pergunta" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="1 - Excelente" class="java.lang.Long"/>
	<field name="2 - Muito Bom" class="java.lang.Long"/>
	<field name="3 - Bom" class="java.lang.Long"/>
	<field name="4 - Regular" class="java.lang.Long"/>
	<field name="5 - Ruim" class="java.lang.Long"/>
	<field name="TOTAL" class="java.lang.Long"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="61" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="41" width="547" height="20" backcolor="#CCCCCC" uuid="3f87a7a8-dfd1-40d5-ac80-3de65705eca0"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement x="0" y="41" width="151" height="20" uuid="8b071b00-a91d-40de-806f-401ec0e20254"/>
				<box leftPadding="6">
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Justified" verticalAlignment="Middle">
					<font fontName="Verdana" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[PERGUNTA]]></text>
			</staticText>
			<staticText>
				<reportElement x="151" y="41" width="66" height="20" uuid="d11d6e0e-730a-433e-ad2d-4b93af50ad6c"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[1 - Excelente ]]></text>
			</staticText>
			<staticText>
				<reportElement x="217" y="41" width="66" height="20" uuid="b16ca7dd-f704-4278-be1f-d7038dbe192d"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[2 - Muito Bom ]]></text>
			</staticText>
			<staticText>
				<reportElement x="283" y="41" width="66" height="20" uuid="1e866191-67aa-458f-8839-676fe0b2797f"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[3 - Bom ]]></text>
			</staticText>
			<staticText>
				<reportElement x="349" y="41" width="66" height="20" uuid="6972a0f8-24e8-42e4-a6b3-ede7d79f9f85"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[4 - Regular]]></text>
			</staticText>
			<staticText>
				<reportElement x="415" y="41" width="66" height="20" uuid="10056823-bfd3-4952-8529-7d55860c1335"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[5 - Ruim]]></text>
			</staticText>
			<staticText>
				<reportElement x="481" y="41" width="66" height="20" uuid="fb0c93ea-71c3-4b3b-96af-d3e2e5dff823"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana" size="7" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="151" height="20" uuid="cc362e97-d581-4da8-8723-6392c18893d0"/>
				<box leftPadding="6">
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Verdana"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{Pergunta}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="151" y="0" width="66" height="20" uuid="4bf53b6d-c198-4df4-93f2-3fc4b93b8cb9"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{1 - Excelente}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="217" y="0" width="66" height="20" uuid="a59c9fa0-e71c-45ee-b5ef-bf5d31f46fae"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{2 - Muito Bom}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="283" y="0" width="66" height="20" uuid="5a91a1b6-8c85-4c3a-a0ab-c6b6d617a9f9"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{3 - Bom}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="349" y="0" width="66" height="20" uuid="36b34380-cb1e-4d1f-8bce-8d51caad1077"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{4 - Regular}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="415" y="0" width="66" height="20" uuid="fe498b76-8b60-43f0-9bf9-28b8fde8832a"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{5 - Ruim}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="481" y="0" width="66" height="20" uuid="ff147343-f879-4ef2-a391-4f4f72c6d247"/>
				<box>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Verdana"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{TOTAL}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
